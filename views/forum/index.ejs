<div id="topic-showing-count" class="alert alert-warning">
	<small>Showing <span id="topic-count"><%= sails.config.board.topicsPerPage %></span> of <%= totalTopics %> Total</small>
</div>

<section id="topics">
	<header>
		<h5><%= forum.name %></h5>
	</header>
	<div class="content">
		<% if (topics.length) { %>

			<% _.each(topics, function (topic) { %>

				<% include ../partials/topic/single.ejs %>

			<% }) %>

		<% } else { %>
			<p id="no-topics">
				No topics
			</p>
		<% } %>

	</div>
</section>

<button class="btn btn-orange" data-event="click" data-action="topic.newTrigger">
	New topic
</button>

<script>
	ASF.globals.forum = <%-: forum|json_encode %>;

	$(function () {

		$(document).on('scroll', function () {
			
			if ($(window).scrollTop() >= $(this).height() - $(window).height()) {
				ASF.forum.loadMoreTopics(<%= forum.id %>, $('.topic').length);
			}

		});

		ASF.page.sidebar = <%-: sails.config.sidebars[section]|json_encode %>;

	});
</script>